!function(t){"use strict";AWEContent.Models.TextItem=AWEContent.Models.Item.extend({defaults:{machine_name:"text",textContent:"This is a custom text. You can use editor to change how it display. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",fontFamily:"",fontStyle:"",textAlign:"left",fontSize:-1,lineHeight:-1,letterSpacing:-1,color:"",backgroundColor:"",boxModelSettings:{},customID:"",customClass:"",customEnableAttributes:0,customDataAttributes:"[]",customActionAttributes:'{"newAction": "", "newAttrName": "", "newAttrValue": ""}',customEnableAnimations:0,customDataAnimations:'{"type": "none"}',lgResponsive:!0,xsResponsive:!0,mediumResponsive:!0,smResponsive:!0},relations:[{type:Backbone.HasOne,key:"boxModelSettings",relatedModel:AWEContent.Models.BoxModelSettings}],createView:function(){this.view=new AWEContent.Views.TextItem({model:this})},clone:function(){var e={};return t.each(this.toJSON(),function(t,n){e[t]=n}),e.boxModelSettings=new AWEContent.Models.BoxModelSettings(e.boxModelSettings),new AWEContent.Models.TextItem(e)}}),AWEContent.Views.TextItem=AWEContent.Views.Item.extend({initialize:function(){AWEContent.Views.Item.prototype.initialize.call(this),this.listenTo(this.model.get("boxModelSettings"),"change",this.applySettingsChanged)},renderItemContent:function(){var e=this,n=e.model.toJSON(),i=t('<div class="awe-text awe-item"></div>'),o=i,a={"font-family":n.fontFamily,"text-align":n.textAlign,"font-size":-1==n.fontSize?"":n.fontSize+"px","line-height":-1==n.lineHeight?"":n.lineHeight+"px","letter-spacing":-1==n.letterSpacing?"":n.letterSpacing+"px",color:n.color,"background-color":n.backgroundColor};return n.fontStyle&&(a=t.extend({},a,JSON.parse(n.fontStyle))),o.html(n.textContent),i.css(a).renderItemDefaultBoxModel(n.boxModelSettings),""!=n.customID&&i.attr("id",n.customID),""!=n.customClass&&i.addClass(n.customClass),n.customEnableAnimations&&i.processAnimations(n.customDataAnimations),i.renderItemDefaultAttributes(n.customEnableAttributes,n.customDataAttributes),e.iframeJQuery(this.el).delegate(".awe-text","itemReady",function(){var n,i;e.iframeJQuery(this).hallo({plugins:{halloformat:{formattings:{bold:!0,italic:!0,underline:!0,strikethrough:!0}},halloheadings:{formatBlocks:["p"]},hallojustify:{},hallolists:{lists:{ordered:!0,unordered:!0}}},create:function(){this.addEventListener("paste",function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain");AWEContent.documentIframe.execCommand("insertHTML",!1,e)})},editable:!0,activated:function(e){n=t(e.target).height()},deactivated:function(n){e.changeContent(n),i=t(n.target).height(),i!=i&&e.resizeItem()}})}),e.$el.defaultResponsive(n),i},applySettingsChanged:function(e){var n=this,i=t(".awe-text",n.el),o=e.toJSON(),a=n.$el.height();t.each(e.changedAttributes(),function(t,a){switch(n.$el.changeResponsive(t,a),i.renderChangeSettingBoxModel(t,a,e),t){case"fontFamily":"Default"==a?i.css("font-family",""):i.css("font-family",a);break;case"fontStyle":var s=a?JSON.parse(a):{"font-weight":"","font-style":""};i.css(s);break;case"textAlign":i.css("text-align",a);break;case"fontSize":-1==a?i.css("font-size",""):i.css("font-size",a+"px");break;case"lineHeight":-1==a?i.css("line-height",""):i.css("line-height",a+"px");break;case"letterSpacing":-1==a?i.css("letter-spacing",""):i.css("letter-spacing",a+"px");break;case"color":i.css("color",a);break;case"backgroundColor":i.css("background-color",a);break;case"customID":i.attr("id",a);break;case"customClass":var l=n.model.previousAttributes().customClass;i.removeClass(l).addClass(a);break;case"customEnableAttributes":i.renderChangeSettingsAttributes(t,a,o.customDataAttributes);break;case"customActionAttributes":i.renderChangeSettingsAttributes(t,a);break;case"customEnableAnimations":var r,c;a?(r=o.customDataAnimations,c=null,i.processAnimations(r)):(r=null,c=o.customDataAnimations,i.processAnimations(r,c));break;case"customDataAnimations":var r,c;r=o.customDataAnimations,c=n.model.previousAttributes().customDataAnimations,i.processAnimations(r,c)}}),setTimeout(function(){n.checkChangeHeight(a)},50)},changeContent:function(e){var n=t(e.currentTarget).html();this.model.set("textContent",n)}}),AWEContent.Views.TextItemController=AWEContent.Views.ItemController.extend({machineName:"text",controllerHtml:function(){return'<div class="title-icon">Text</div><i class="ic ac-icon-text"></i>'},createItemModel:function(t){var e;return void 0!=t?(e=new AWEContent.Models.BoxModelSettings(t.boxModelSettings),t.boxModelSettings=e,new AWEContent.Models.TextItem(t)):new AWEContent.Models.TextItem({boxModelSettings:new AWEContent.Models.BoxModelSettings})}}),AWEContent.Views.TextPanel=AWEContent.Views.ItemPanel.extend({tagName:"div",className:"awe-obj-panel text-panel",panelName:"text",initPanel:function(){AWEContent.Views.ItemPanel.prototype.initPanel.call(this);var e=this;t("#text-font",this.$el).bind("fontFamilyChange",function(t,n){e.editingModel.set("fontFamily",n)}).bind("fontStyleChange",function(t,n){e.editingModel.set("fontStyle",n.value)}).bind("textAlignChange",function(t,n){e.editingModel.set("textAlign",n.value)}).bind("fontSizeChange",function(t,n){e.editingModel.set("fontSize",n.value)}).bind("letterSpacingChange",function(t,n){e.editingModel.set("letterSpacing",n.value)}).bind("lineHeightChange",function(t,n){e.editingModel.set("lineHeight",n.value)}),t("#text-text-color",this.$el).change(function(t,n){n=n?n.toRgbString():"",e.editingModel.set("color",n)}),t("#text-background-color",this.$el).change(function(t,n){n=n?n.toRgbString():"",e.editingModel.set("backgroundColor",n)}),t("#text-layout-tab",this.el).initBoxModelPanel(this,"boxModelSettings"),t("#text-text-custom-id",this.el).change(function(){e.editingModel.set("customID",t(this).val())}),t("#text-text-custom-classes",this.el).change(function(){e.editingModel.set("customClass",t(this).val())}),t("#text-custom-attributes",this.el).initAttributesPanel(e),t("#text-animations input[name=enabled_custom_animation]",this.el).change(function(n,i){e.editingModel.set("customEnableAnimations",parseInt(t(this).val())),i&&e.editingModel.set("customDataAnimations",JSON.stringify(i.animations))}),t("#text-layout-tab",e.el).initBoxModelPanel(e,"boxModelSettings")},setPanelElementsValue:function(){var e=this.editingModel.toJSON();t("#text-font",this.$el).aweFont("options",{fontFamily:e.fontFamily,fontStyle:e.fontStyle,fontSize:e.fontSize,textAlign:e.textAlign,letterSpacing:e.letterSpacing,lineHeight:e.lineHeight}),t("#text-text-color",this.$el).aweColorPicker("value",e.color),t("#text-background-color",this.$el).aweColorPicker("value",e.backgroundColor),t("#text-layout-tab",this.el).initBoxModel(e.boxModelSettings),t("#text-text-custom-id",this.el).val(e.customID),t("#text-text-custom-classes",this.el).val(e.customClass),t("#text-custom-attributes input[name=enabled_custom_attributes]",this.el).val(e.customEnableAttributes).trigger("change"),t("#text-custom-attributes input[name=attributes_data]",this.el).val(e.customDataAttributes),t("#text-custom-attributes",this.el).initAttributes(e.customEnableAttributes,e.customDataAttributes),t("#text-animations input[name=enabled_custom_animation]",this.el).val(e.customEnableAnimations).trigger("change"),t("#text-animations input[name=enabled_custom_animation]",this.el).attr("data-animations",e.customDataAnimations).data("view",this.editingModel.view)},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Custom Text</h2></div>'},custom_type:{type:"section",font:{type:"font"}},color:{type:"section",text_color:{type:"colorpicker",title:"Text Color",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}},background_color:{type:"colorpicker",title:"Background Color",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}}},box_settings:{type:"section",layout_tab:{type:"tabs",tabs:[{tab_title:"Border",contents:{header_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Radius",contents:{header_boder_radius:{type:"box_model",model_type:"border_radius",min_value:0,max_value:100,allow_type:!0}}},{tab_title:"Padding",contents:{header_padding:{type:"box_model",model_type:"padding",allow_type:!0,min_value:0,max_value:100}}},{tab_title:"Margin",contents:{header_margin:{type:"box_model",model_type:"margin",allow_type:!0,min_value:0,max_value:100}}}]}},definitions:{type:"section",custom_id:{type:"text_field",title:"ID",default_value:"ID"},custom_classes:{type:"text_field",title:"Classes",default_value:"className"},custom_attributes:{type:"custom_attributes"},animations:{type:"animations"}}}}}),t(document).ready(function(){AWEContent.Controllers.text=new AWEContent.Views.TextItemController,AWEContent.Panels.text=new AWEContent.Views.TextPanel})}(jQuery);