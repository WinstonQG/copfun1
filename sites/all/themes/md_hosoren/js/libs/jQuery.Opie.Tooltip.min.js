var Utils=new function(){this.defaultValue=function(t,e){return e=Is.defined(e)?e:!1,Is.defined(t)?t:e},this.roundNumber=function(t,e){var i=Math.round(t*Math.pow(10,e))/Math.pow(10,e);return i}};jQuery.fn.doCheck=function(t){return this.each(function(){var e=jQuery(this);"function"==typeof jQuery.fn.prop&&(t?e.prop("checked","checked"):e.removeProp("checked")),t?e.attr("checked","checked"):e.removeAttr("checked"),e.get(0).checked=t}),this},jQuery.fn.setAttr=function(t,e){return jQuery(this).attr("data-opie-"+t,e)},jQuery.fn.getAttr=function(t){return jQuery(this).attr("data-opie-"+t)},jQuery.fn.getData=function(t){return jQuery(this).data("opie-"+t)},jQuery.fn.setData=function(t,e){if("[object Object]"===String(t)&&"undefined"==typeof e){for(var i in t)jQuery(this).data("opie-"+i,t[i]);return this}return jQuery(this).data("opie-"+t,e)},jQuery.fn.setEvent=function(t,e){return jQuery(this).bind("opie-"+t,e)},jQuery.fn.reverse=[].reverse;var Is=new function(){this.cssSelector=function(t){if(Is.string(t)){if("#"==t)return!1;if("#"==t.substr(0,1)||"."==t.substr(0,1)||":"==t.substr(0,1))return!0}return!1},this.defined=function(t){return"undefined"!=typeof t},this.string=function(t){return"string"==typeof t}},Opts=function(t,e){this.opts=t,this.jq=e};Opts.prototype={get:function(t){return this.parse(this.opts[t])},set:function(t,e){return this.opts[t]=e,this},string:function(t){return this.parse(this.opts[t],!0)},number:function(t){return parseFloat(this.get(t))},bool:function(t){var e=this.get(t);return"1"==e||e===!0?!0:!1},selector:function(t){return this.jq(this.get(t))},func:function(t){return this.parse(this.opts[t],!0,!0)},parse:function(t,e,i){if("undefined"==typeof t)return"";var o=t.valueOf();if("function"==typeof o)return 1==i?o:o();if(Is.cssSelector(o)&&e!==!0){var r=this.jq(o);if(r.size()<=0)return debug("Opts.parse "+o+" not found"),!1;var n="INPUT"==r.get(0).tagName&&"checkbox"==r.attr("type").toString().toLowerCase();return n?r.is(":checked"):r.val()}return o}},function(t){"use strict";var e=0;t.fn.OpieTooltip=function(e,i){var o={position:"bc:tc",event:"mouseover",eventout:"mouseout",fade:50,fadeout:200};if("defaults"===e)return o;var r,n=new Opts(t.extend(o,e),t);return this.each(function(){r=new t.OpieTooltip(n,t(this),arguments),"initCSS3"===e?IS.initCSS3.apply(r,i):r.init()}),this},t.OpieTooltip=function(i,o){var r=this;this.init=function(){var e=r.getOpt(o,"event"),i=e?e:"mouseover";if(o.on(i,function(e){var i=t(this),o=r.draw(i);if("click"==e.type?o.find(".o-tooltip-close").show():o.find(".o-tooltip-close").hide(),i.getData("title")||i.attr("title")||r.getOpt(i,"template")||i.attr("alt")||"#"!=i.attr("href")){var n=r.getOpt(i,"fade");o.stop().fadeTo(n,1),i.getData("title")||(i.setData("title",i.attr("title")).attr("title",""),i.setData("alt",i.attr("alt")).attr("alt","")),r.setContent(i,o);var a=r.getOpt(i,"position").split(":"),s=a[0],u=a[1];r.updatePosition(o,i,s,u)}}),"click"==i)var n="void";else var e=r.getOpt(o,"eventout"),n=e?e:"mouseout";"void"!=n&&o.on(n,function(e){var i=t(this);if("click"!=e.type){var o=r.draw(i);o.find(".o-tooltip-close").hide()}r.close(i)})},this.close=function(t){var e=r.draw(t),i=r.getOpt(t,"fadeout"),o=i?parseFloat(i):null;e.stop().fadeTo(o,0,function(){e.remove()})},this.draw=function(i){var o=i.getData("opie-tool-tip-id");if(o){var n=t("#"+o);if(n.size()>0)return n}if(i.getData("tooltip-id"))var a=i.getData("tooltip-id");else{var a="opieTooltip-"+e;e++}var n=t('<div class="o-tooltip" id="'+a+'"><div class="o-tooltip-arrow"></div><div class="o-tooltip-close"><span>x</span></div><div class="o-tooltip-inner"></div></div>');return n.find(".o-tooltip-close").on("click",function(){r.close(t(this).parents(".o-tooltip").getData("target"))}),n.setData("target",i),i.setData("opie-tool-tip-id",a),n.setEvent("updatePosition",function(e,i,o,n,a){r.updatePosition(t(this),i,o,n,a)}),t("body").append(n),n.hide(),n},this.getOpt=function(t,e,o){return Is.defined(t.getAttr(e))?t.getAttr(e):o?i.string(e):i.get(e)},this.setContent=function(e,i){var n=(i.find(".o-tooltip-inner"),r.getOpt(e,"template",!0));if(n){if(!i.getData("template")){Is.cssSelector(n)||(n="<div>"+n+"</div>");var a=t(n);i.setData("template",a.html())}var s=i.getData("template");if(!Is.defined(i.getData("template")))return console.log("Template not found"),!1;t.each(i.getData("template").match(/\{.*?\}/gim),function(t,i){var o=i.replace("{","").replace("}",""),r=e.attr(o);"title"==o&&(r=e.getData("title")),s=s.replace(i,r)}),i.find(".o-tooltip-inner").html(s)}else i.find(".o-tooltip-inner").html(e.getData("title"));var u=c?c:"mouseover",f=i.find(".o-tooltip-close");if("click"==u){f.show()}else{var c=r.getOpt(o,"eventout");f.hide()}},this.updatePosition=function(e,i,o,n,a){if(!i){i=e.getData("target");var s=r.getOpt(i,"position").split(":"),o=s[0],n=s[1]}var u=i.offset().top,f=i.offset().left,c=i.outerHeight(),p=i.outerWidth(),l=e.offset().top,h=e.offset().left,d=e.outerHeight(),v=e.outerWidth(),g={top:0,left:0};if(e.css(g).width(v).height(d),e.attr("class","o-tooltip "+n),"t"==o.charAt(0)?g.top=u:"m"==o.charAt(0)?g.top=u+c/2:"b"==o.charAt(0)&&(g.top=u+c),"l"==o.charAt(1)?g.left=f:"c"==o.charAt(1)?g.left=f+p/2:"r"==o.charAt(1)&&(g.left=f+p),"m"==n.charAt(0)?g.top-=d/2:"b"==n.charAt(0)&&(g.top-=d),"r"==n.charAt(1)?g.left-=v:"c"==n.charAt(1)&&(g.left-=v/2),e.css(g),a!==!0){var l=e.offset().top,h=e.offset().left,m=t(window).scrollTop(),y=t(window).scrollLeft(),w=l+e.outerHeight()-m,A=h+e.outerWidth()-y,j=t(window).height(),D=t(window).width(),b={b:"t",t:"b",l:"r",r:"l"};if(m>l)var O="b";else if(w>j)var O="t";var Q=o,k=n;(m>l||w>j)&&(o.charAt(0)!=O&&(b.m="b",w>j&&(b.m="t"),Q=b[o.charAt(0)]+o.charAt(1)),"ml"!=n&&"mr"!=n&&(k=b[n.charAt(0)]+n.charAt(1))),o=Q,n=k;var Q=o,k=n;0>h&&("m"==n.charAt(0)?(Q="mr",k="ml"):k=n.charAt(0)+"l"),A>D&&(k=n.charAt(0)+"r"),o=Q,n=k,(m>l||w>j||0>h||A>D)&&r.updatePosition(e,i,o,n,!0)}}}}(jQuery);