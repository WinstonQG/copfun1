!function(t){"use strict";AWEContent.Models.ButtonItem=AWEContent.Models.Item.extend({defaults:{machine_name:"button",buttonUrl:"",buttonStyle:"none",textButton:"Button",color:"",backgroundColor:"",hoverColor:"",hoverBackgroundColor:"",fontFamily:"",fontStyle:"",fontSize:-1,lineHeight:-1,letterSpacing:-1,openNewWindow:1,boxModelSettings:{},customID:"",customClass:"",customEnableAttributes:0,customDataAttributes:"[] ",customActionAttributes:'{"newAction": "", "newAttrName": "", "newAttrValue": ""}',customEnableAnimations:0,customDataAnimations:'{"type": "none"}',lgResponsive:!0,xsResponsive:!0,mediumResponsive:!0,smResponsive:!0},createView:function(){this.view=new AWEContent.Views.ButtonItem({model:this})},relations:[{type:Backbone.HasOne,key:"boxModelSettings",relatedModel:AWEContent.Models.BoxModelSettings}],clone:function(){var e={};return t.each(this.toJSON(),function(t,o){e[t]=o}),e.boxModelSettings=new AWEContent.Models.BoxModelSettings(e.boxModelSettings),new AWEContent.Models.ButtonItem(e)}}),AWEContent.Views.ButtonItem=AWEContent.Views.Item.extend({initialize:function(){AWEContent.Views.Item.prototype.initialize.call(this),this.listenTo(this.model.get("boxModelSettings"),"change",this.applySettingsChanged)},renderItemContent:function(){var e=this,o=t('<a href="" class="awe-btn awe-item"></a>'),n=t("<style></style>"),a=e.model.toJSON(),i={"font-size":-1==a.fontSize?"":a.fontSize+"px","line-height":-1==a.lineHeight?" ":a.lineHeight+"px","letter-spacing":-1==a.letterSpacing?"":a.letterSpacing+"px","font-family":a.fontFamily};return a.fontStyle&&(i=t.extend({},i,JSON.parse(a.fontStyle))),e.$el.append(n),e.classButton="awe-button-"+e.cid,e.enableEditText=0,o.attr({href:a.buttonUrl,id:a.customID}).addClass(a.customClass+" "+e.classButton+" "+a.buttonStyle).html(a.textButton).css(i).renderItemDefaultBoxModel(a.boxModelSettings),a.openNewWindow&&o.attr("target","_blank"),o.renderItemDefaultAttributes(a.customEnableAttributes,a.customDataAttributes),a.customEnableAnimations&&o.processAnimations(a.customDataAnimations),""!=a.textHover&&o.attr("data-hover",a.textHover),n.html(e.processStyle()),e.iframeJQuery(this.el).delegate(".awe-btn.awe-item","itemReady",function(){var o,n;e.iframeJQuery(this).hallo({plugins:{halloformat:{}},editable:!0,create:function(){this.addEventListener("paste",function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain");AWEContent.documentIframe.execCommand("insertHTML",!1,e)})},activated:function(e){o=t(e.target).height()},deactivated:function(a){e.changeContent(a),n=t(a.target).height(),n!=o&&e.resizeItem()}})}),e.$el.defaultResponsive(a),o},applySettingsChanged:function(e){var o=this,n=t(".awe-btn",o.$el),a=(t("style",o.$el),e.toJSON()),i=o.$el.height();t.each(e.changedAttributes(),function(t,i){switch(o.$el.changeResponsive(t,i),n.renderChangeSettingBoxModel(t,i,e),t){case"buttonUrl":n.attr("href",i);break;case"buttonStyle":var l=o.model.previousAttributes().buttonStyle;n.removeClass(l).addClass(i);break;case"textButton":n.html(i);break;case"textHover":n.attr("data-hover",i);break;case"color":case"backgroundColor":case"hoverColor":case"hoverBackgroundColor":o.generateStyle();break;case"fontFamily":n.css("font-family",i);break;case"fontStyle":var s=i?JSON.parse(i):{"font-weight":"","font-style":""};n.css(s);break;case"fontSize":-1==i?n.css("font-size",""):n.css("font-size",i+"px");break;case"lineHeight":-1==i?n.css("line-height",""):n.css("line-height",i+"px");break;case"letterSpacing":-1==i?n.css("letter-spacing",""):n.css("letter-spacing",i+"px");break;case"openNewWindow":var r=i?"_blank":"_self";n.attr("target",r);break;case"customID":n.attr("id",i);break;case"customClass":var l=o.model.previousAttributes().customClass;n.removeClass(l).addClass(i);break;case"customEnableAttributes":n.renderChangeSettingsAttributes(t,i,a.customDataAttributes);break;case"customActionAttributes":n.renderChangeSettingsAttributes(t,i);break;case"customEnableAnimations":var u,c;i?(u=a.customDataAnimations,c=null,n.processAnimations(u)):(u=null,c=a.customDataAnimations,n.processAnimations(u,c));break;case"customDataAnimations":var u,c;u=a.customDataAnimations,c=o.model.previousAttributes().customDataAnimations,n.processAnimations(u,c)}}),setTimeout(function(){o.checkChangeHeight(i)},50)},changeContent:function(e){var o=this,n=(o.model.toJSON(),t(e.currentTarget).html());this.model.set("textButton",n)},editText:function(){var t=this;t.enableEditText||(t.iframeJQuery("a",t.el).hallo({plugins:{halloformat:{}},editable:!0,create:function(){this.addEventListener("paste",function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain");AWEContent.documentIframe.execCommand("insertHTML",!1,e)})},deactivated:function(e){t.changeContent(e)}}),t.enableEditText=1)},processStyle:function(){var t,e=this.model.toJSON();return t="."+this.classButton+".awe-btn {color :"+e.color+";background-color:"+e.backgroundColor+";} ."+this.classButton+".awe-btn:hover {color :"+e.hoverColor+";background:"+e.hoverBackgroundColor+";}"},generateStyle:function(){var e=this,o="",n=this.model.toJSON();e.updateColor&&clearTimeout(e.updateColor),e.updateColor=setTimeout(function(){o="."+e.classButton+".awe-btn {color :"+n.color+";background-color:"+n.backgroundColor+";} ."+e.classButton+".awe-btn:hover {color :"+n.hoverColor+";background:"+n.hoverBackgroundColor+";}",t("style",e.el).html(o),e.updateColor=!1},100)}}),AWEContent.Views.ButtonItemController=AWEContent.Views.ItemController.extend({machineName:"button",controllerHtml:function(){return'<div class="title-icon">Button</div><i class="ic ac-icon-button"></i>'},createItemModel:function(t){var e;return void 0!=t?(e=new AWEContent.Models.BoxModelSettings(t.boxModelSettings),t.boxModelSettings=e,new AWEContent.Models.ButtonItem(t)):new AWEContent.Models.ButtonItem({boxModelSettings:new AWEContent.Models.BoxModelSettings})}}),AWEContent.Views.ButtonPanel=AWEContent.Views.ItemPanel.extend({tagName:"div",className:"awe-obj-panel panel-button",panelName:"button",initPanel:function(){AWEContent.Views.ItemPanel.prototype.initPanel.call(this);var e=this;t("#text-button-text-content",e.el).change(function(){e.editingModel.set("textButton",t(this).val())}),t("#text-button-enter-link",this.el).change(function(){e.editingModel.set("buttonUrl",t(this).val())}),t("#button-select-style",this.el).change(function(t,o){e.editingModel.set("buttonStyle",o.value)}),t("#button-text-color",this.el).change(function(t,o){o=o?o.toRgbString():"",e.editingModel.set("color",o)}),t("#button-background-color",this.el).change(function(t,o){o=o?o.toRgbString():"",e.editingModel.set("backgroundColor",o)}),t("#button-hover-text-color",this.el).change(function(t,o){o=o?o.toRgbString():"",e.editingModel.set("hoverColor",o)}),t("#button-hover-background-color",e.el).change(function(t,o){o=o?o.toRgbString():"",e.editingModel.set("hoverBackgroundColor",o)}),t("#button-font-name",this.$el).bind("fontFamilyChange",function(t,o){e.editingModel.set("fontFamily",o)}).bind("fontStyleChange",function(t,o){e.editingModel.set("fontStyle",o.value)}).bind("textAlignChange",function(t,o){e.editingModel.set("textAlign",o.value)}).bind("fontSizeChange",function(t,o){e.editingModel.set("fontSize",o.value)}).bind("letterSpacingChange",function(t,o){e.editingModel.set("letterSpacing",o.value)}).bind("lineHeightChange",function(t,o){e.editingModel.set("lineHeight",o.value)}),t("#button-target-blank input",e.el).change(function(o,n){n||e.editingModel.set("openNewWindow",parseInt(t(this).val()))}),t("#button-column-box-model",e.el).initBoxModelPanel(e,"boxModelSettings"),t("#text-button-custom-id",e.el).change(function(){e.editingModel.set("customID",t(this).val())}),t("#text-button-custom-class",e.el).change(function(){e.editingModel.set("customClass",t(this).val())}),t("#button-custom-attributes",this.el).initAttributesPanel(e),t("#button-animations input[name=enabled_custom_animation]",this.el).change(function(o,n){e.editingModel.set("customEnableAnimations",parseInt(t(this).val())),n&&e.editingModel.set("customDataAnimations",JSON.stringify(n.animations))})},setPanelElementsValue:function(){var e=this,o=this.editingModel.toJSON();t("#text-button-enter-link",e.el).val(o.buttonUrl),t("#button-select-style",this.el).aweSelect("value",o.buttonStyle),t("#text-button-text-content",this.el).val(o.textButton),t("#button-text-color",e.el).aweColorPicker("value",o.color),t("#button-background-color",e.el).aweColorPicker("value",o.backgroundColor),t("#button-hover-text-color",e.el).aweColorPicker("value",o.hoverColor),t("#button-hover-background-color",e.el).aweColorPicker("value",o.hoverBackgroundColor),t("#button-font-name",this.$el).aweFont("options",{fontFamily:o.fontFamily,fontStyle:o.fontStyle,fontSize:o.fontSize,textAlign:o.textAlign,letterSpacing:o.letterSpacing,lineHeight:o.lineHeight}),t("#button-target-blank input",e.el).val(o.openNewWindow).trigger("change"),t("#button-column-box-model",e.el).initBoxModel(o.boxModelSettings),t("#text-button-custom-id",e.el).val(o.customID),t("#text-button-custom-class",e.el).val(o.customClass),t("#button-custom-attributes",this.el).initAttributes(o.customEnableAttributes,o.customDataAttributes),t("#button-animations input[name=enabled_custom_animation]",this.el).val(o.customEnableAnimations).trigger("change"),t("#button-animations input[name=enabled_custom_animation]",this.el).attr("data-animations",o.customDataAnimations).data("view",this.editingModel.view)},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Button</h2></div>'},custom_attributes:{type:"section",enter_link:{type:"text_field",title:"Link",attributes:{placeholder:"http://..."},default_value:"http://"},select_style:{type:"select",title:"Style",options:{none:"None","hvr-fade":"Fade","hvr-sweep-to-right":"Sweep To Right","hvr-sweep-to-left":"Sweep To Left","hvr-sweep-to-bottom":"Sweep To Bottom","hvr-sweep-to-top":"Sweep To Top"},default_value:"none"}},custom_color:{type:"section","text-color":{type:"colorpicker",title:"Button text color",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}},background_color:{type:"colorpicker",title:"Button background",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}},hover_text_color:{type:"colorpicker",title:"Button hover text color",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}},hover_background_color:{type:"colorpicker",title:"Button hover background",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}}},custom_text:{type:"section",font_name:{type:"font",disabledElements:["textAlign"]}},custom_target:{type:"section",target_blank:{type:"toggle",title:"Open in new window",default_value:0}},custom_box_model:{type:"section",column_box_model:{type:"tabs",tabs:[{tab_title:"Border",contents:{custom_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Radius",contents:{custom_border_radius:{type:"box_model",model_type:"border_radius",allow_type:!0,min_value:0,max_value:100,default_value:0}}},{tab_title:"Padding",contents:{custom_padding:{type:"box_model",model_type:"padding",allow_type:!0,min_value:0,max_value:100,default_value:0}}},{tab_title:"Margin",contents:{custom_margin:{type:"box_model",model_type:"margin",allow_type:!0,min_value:0,max_value:100,default_value:0}}}]}},custom_definitions:{type:"section",custom_id:{type:"text_field",title:"ID",attributes:{placeholder:"Custom ID"},default_value:""},custom_class:{type:"text_field",title:"CSS class",attributes:{placeholder:"Custom class"},default_value:""},custom_attributes:{type:"custom_attributes"},animations:{type:"animations"}}}}}),t(document).ready(function(){AWEContent.Controllers.button=new AWEContent.Views.ButtonItemController,AWEContent.Panels.button=new AWEContent.Views.ButtonPanel})}(jQuery);