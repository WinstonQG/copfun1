!function(e){"use strict";AWEContent.Models.FacebookItem=AWEContent.Models.Item.extend({defaults:{machine_name:"facebook",facebookUrl:"https://www.facebook.com/megadrupal?fref=ts",width:"300",height:"300",colorScheme:"dark",friendsFaces:0,header:0,posts:0,border:0,boxModelSettings:{},customID:"",customClass:"",customEnableAttributes:0,customDataAttributes:"[] ",customActionAttributes:'{"newAction": "", "newAttrName": "", "newAttrValue": ""}',customEnableAnimations:0,customDataAnimations:'{"type" : "none"}',lgResponsive:!0,xsResponsive:!0,mediumResponsive:!0,smResponsive:!0},relations:[{type:Backbone.HasOne,key:"boxModelSettings",relatedModel:AWEContent.Models.BoxModelSettings}],createView:function(){this.view=new AWEContent.Views.FacebookItem({model:this})},clone:function(){var t={};return e.each(this.toJSON(),function(e,o){t[e]=o}),t.boxModelSettings=new AWEContent.Models.BoxModelSettings(t.boxModelSettings),new AWEContent.Models.FacebookItem(t)}}),AWEContent.Views.FacebookItem=AWEContent.Views.Item.extend({additionalEvents:{},initialize:function(){AWEContent.Views.Item.prototype.initialize.call(this),this.listenTo(this.model.get("boxModelSettings"),"change",this.applySettingsChanged)},renderItemContent:function(){var t=this,o=t.model.toJSON(),a=e('<iframe class="awe-item awe-facebook" src=""></iframe>');if(a.attr("src",t.processFacebook()).css({width:-1==o.width?"":o.width+"px",height:-1==o.height?"":o.height+"px"}).attr("id",o.customID).addClass(o.customClass),a.renderItemDefaultBoxModel(o.boxModelSettings),a.renderItemDefaultAttributes(o.customEnableAttributes,o.customDataAttributes),o.customEnableAnimations){var i=o.customDataAnimations;a.processAnimations(i)}return t.$el.defaultResponsive(o),a},applySettingsChanged:function(t){var o=this,a=e(".awe-facebook",o.el),i=o.model.toJSON(),s=o.$el.height();e.each(t.changedAttributes(),function(e,s){switch(o.$el.changeResponsive(e,s),a.renderChangeSettingBoxModel(e,s,t),e){case"facebookUrl":case"colorScheme":case"friendsFaces":case"header":case"posts":case"border":a.attr("src",o.processFacebook());break;case"width":-1==s?a.css("width",""):a.css("width",s+"px"),a.attr("src",o.processFacebook());break;case"height":-1==s?a.css("height",""):a.css("height",s+"px"),a.attr("src",o.processFacebook());break;case"customID":a.attr("id",s);break;case"customClass":var n=o.model.previousAttributes().customClass;a.removeClass(n).addClass(s);break;case"customEnableAttributes":a.renderChangeSettingsAttributes(e,s,i.customDataAttributes);break;case"customActionAttributes":a.renderChangeSettingsAttributes(e,s);break;case"customEnableAnimations":var l,c;s?(l=i.customDataAnimations,c=null,a.processAnimations(l)):(l=null,c=i.customDataAnimations,a.processAnimations(l,c));break;case"customDataAnimations":var l,c;l=i.customDataAnimations,c=o.model.previousAttributes().customDataAnimations,a.processAnimations(l,c)}}),setTimeout(function(){o.checkChangeHeight(s)},50)},processFacebook:function(){var e=this,t=e.model.toJSON(),o="";return""!=t.facebookUrl&&(o+="//www.facebook.com/plugins/likebox.php?href=",o+=t.facebookUrl,o+="&colorscheme="+t.colorScheme,o+=t.friendsFaces?"&show_faces=true":"&show_faces=false",o+=t.header?"&header=true":"&header=false",o+=t.posts?"&stream=true":"&stream=false",o+=t.border?"&show_border=true":"&show_border=false",o+=-1!=t.width?"&width="+t.width:"",o+=-1!=t.height?"&height="+t.height:""),o}}),AWEContent.Views.FacebookItemController=AWEContent.Views.ItemController.extend({machineName:"facebook",controllerHtml:function(){return'<div class="title-icon">Facebook like box</div><i class="ic ac-icon-facebook"></i>'},createItemModel:function(e){var t;return void 0!=e?(t=new AWEContent.Models.BoxModelSettings(e.boxModelSettings),e.boxModelSettings=t,new AWEContent.Models.FacebookItem(e)):new AWEContent.Models.FacebookItem({boxModelSettings:new AWEContent.Models.BoxModelSettings})}}),AWEContent.Views.FacebookPanel=AWEContent.Views.ItemPanel.extend({tagName:"div",className:"awe-obj-panel facebook-panel",panelName:"facebook",initPanel:function(){AWEContent.Views.ItemPanel.prototype.initPanel.call(this);var t=this;e("#text-facebook-custom-url",t.el).change(function(){t.editingModel.set("facebookUrl",e(this).val())}),e("#facebook-width",t.el).change(function(o,a){t.editingModel.set("width",a.value),-1==a.value&&e(".display-font",e(this)).text("DF")}),e("#facebook-height",t.el).change(function(o,a){t.editingModel.set("height",a.value),-1==a.value&&e(".display-font",e(this)).text("DF")}),e("#facebook-scheme-dark",t.el).change(function(e,o){t.editingModel.set("colorScheme",o.value)}),e("#facebook-friend input",t.el).change(function(o,a){a||t.editingModel.set("friendsFaces",parseInt(e(this).val()))}),e("#facebook-header input",t.el).change(function(o,a){a||t.editingModel.set("header",parseInt(e(this).val()))}),e("#facebook-posts input",t.el).change(function(o,a){a||t.editingModel.set("posts",parseInt(e(this).val()))}),e("#facebook-border input",t.el).change(function(o,a){a||t.editingModel.set("border",parseInt(e(this).val()))}),e("#facebook-layout-tab",t.el).initBoxModelPanel(t,"boxModelSettings"),e("#text-facebook-custom-id",this.el).change(function(){t.editingModel.set("customID",e(this).val())}),e("#text-facebook-custom-classes",this.el).change(function(){t.editingModel.set("customClass",e(this).val())}),e("#facebook-custom-attributes",this.el).initAttributesPanel(t),e("#facebook-animations input[name=enabled_custom_animation]",this.el).change(function(o,a){t.editingModel.set("customEnableAnimations",parseInt(e(this).val())),a&&t.editingModel.set("customDataAnimations",JSON.stringify(a.animations))})},setPanelElementsValue:function(){var t=this,o=this.editingModel.toJSON();e("#text-facebook-custom-url",t.el).val(o.facebookUrl),e("#facebook-width",t.el).aweSlider("value",o.width),e("#facebook-height",t.el).aweSlider("value",o.height),e("#facebook-scheme-dark",t.el).aweSelect("value",o.colorScheme),e("#facebook-friend input",t.el).val(o.friendsFaces).trigger("change",{isPanel:!0}),e("#facebook-header input",t.el).val(o.header).trigger("change",{isPanel:!0}),e("#facebook-posts input",t.el).val(o.posts).trigger("change",{isPanel:!0}),e("#facebook-border input",t.el).val(o.border).trigger("change",{isPanel:!0}),e("#facebook-layout-tab",t.el).initBoxModel(o.boxModelSettings),e("#text-facebook-custom-id",t.el).val(o.customID),e("#text-facebook-custom-classes",t.el).val(o.customClass),e("#facebook-custom-attributes",this.el).initAttributes(o.customEnableAttributes,o.customDataAttributes),e("#facebook-animations input[name=enabled_custom_animation]",this.el).val(o.customEnableAnimations).trigger("change"),e("#facebook-animations input[name=enabled_custom_animation]",this.el).attr("data-animations",o.customDataAnimations).data("view",this.editingModel.view)},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Facebook</h2></div>'},custom_type:{type:"section",custom_url:{type:"text_field",title:"URL",attributes:{placeholder:"paste url here"},default_value:""}},box_size:{type:"section",width:{type:"slider",title:"Width",min_value:-1,max_value:1e3,default_value:500,allow_type:!0,unit:"px"},height:{type:"slider",title:"Height",min_value:-1,max_value:1e3,default_value:500,allow_type:!0,unit:"px"}},news_feed:{type:"section",scheme_dark:{type:"select",title:"Color Scheme",options:{dark:"Dark",light:"Light"},default_value:"dark"},friend:{type:"toggle",title:"Friends'faces",default_value:0},header:{type:"toggle",title:"Header",default_value:0},posts:{type:"toggle",title:"Posts",default_value:0},border:{type:"toggle",title:"Border",default_value:0}},box_settings:{type:"section",layout_tab:{type:"tabs",tabs:[{tab_title:"Border",contents:{header_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Radius",contents:{header_boder_radius:{type:"box_model",model_type:"border_radius",min_value:0,max_value:100,allow_type:!0}}},{tab_title:"Padding",contents:{header_padding:{type:"box_model",model_type:"padding",allow_type:!0,min_value:0,max_value:100}}},{tab_title:"Margin",contents:{header_margin:{type:"box_model",model_type:"margin",allow_type:!0,min_value:0,max_value:100}}}]}},definitions:{type:"section",custom_id:{type:"text_field",title:"ID",default_value:"ID"},custom_classes:{type:"text_field",title:"Classes",default_value:"className"},custom_attributes:{type:"custom_attributes"},animations:{type:"animations"}}}}}),e(document).ready(function(){AWEContent.Controllers.facebook=new AWEContent.Views.FacebookItemController,AWEContent.Panels.facebook=new AWEContent.Views.FacebookPanel})}(jQuery);