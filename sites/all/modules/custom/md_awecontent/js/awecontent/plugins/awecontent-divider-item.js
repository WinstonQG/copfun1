!function(e){"use strict";AWEContent.Models.DividerItem=AWEContent.Models.Item.extend({defaults:{machine_name:"divider",textContent:"Divider text here",borderStyle:"dotted",borderColor:"#ccc",borderWeight:0,widthDivider:0,"with":"text",fontFamily:"",fontStyle:"",fontSize:-1,lineHeight:-1,letterSpacing:-1,color:"",width:"200",margin:{},customID:"",customClass:"",customEnableAttributes:0,customDataAttributes:"[] ",customActionAttributes:'{"newAction": "", "newAttrName": "", "newAttrValue": ""}',customEnableAnimations:0,customDataAnimations:'{"type": "none"}',lgResponsive:!0,xsResponsive:!0,mediumResponsive:!0,smResponsive:!0},createView:function(){this.view=new AWEContent.Views.DividerItem({model:this})},relations:[{type:Backbone.HasOne,key:"margin",relatedModel:AWEContent.Models.BoxModelSettings}],clone:function(){var t={};return e.each(this.toJSON(),function(e,i){t[e]=i}),t.margin=new AWEContent.Models.BoxModelSettings(t.margin),new AWEContent.Models.DividerItem(t)}}),AWEContent.Views.DividerItem=AWEContent.Views.Item.extend({initialize:function(){AWEContent.Views.Item.prototype.initialize.call(this),this.listenTo(this.model.get("margin"),"change",this.applySettingsChanged)},renderItemContent:function(){var t=this,i=e('<div class="obj-content awe-item awe-divider">                <div class="divider-field">                    <span class="divider-left"><span class="line-divider"></span></span>                    <span class="text-divider"><div class="content" contenteditable="true" ></div></span>                    <span class="divider-right"><span class="line-divider"></span></span>                </div>                </div>'),n=t.model.toJSON(),o=(e(".divider-left",i),e(".divider-right",i)),a=e(".text-divider .content",i),s=e(".line-divider",i);t.iframeJQuery(this.el).delegate(".awe-divider","itemReady",function(){var i,n;t.iframeJQuery(".text-divider .content",this).hallo({plugins:{halloformat:{}},editable:!0,create:function(){this.addEventListener("paste",function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");AWEContent.documentIframe.execCommand("insertHTML",!1,t)})},activated:function(t){i=e(t.target).height()},deactivated:function(o){t.changeContent(o),n=e(o.target).height(),i!=n&&t.resizeItem()}})});var l={"font-size":-1==n.fontSize?"":n.fontSize+"px","line-height":-1==n.lineHeight?"":n.lineHeight+"px","letter-spacing":-1==n.letterSpacing?"":n.letterSpacing+"px",color:n.color,width:n.width+"px"};if(n.fontStyle&&(l=e.extend({},l,JSON.parse(n.fontStyle))),a.html(n.textContent).css(l).addClass(n.fontFamily.replace(/ /g,"")),"none"==n["with"]&&(a.parent().hide(),o.hide()),s.css({"border-top-style":n.borderStyle,"border-top-color":n.borderColor,"border-top-width":n.borderWeight?n.borderWeight+"px":""}),i.renderItemDefaultAttributes(n.customEnableAttributes,n.customDataAttributes),i.attr("id",n.customID).addClass(n.customClass).renderItemDefaultBoxModel(n.margin),i.css("width",n.widthDivider?n.widthDivider+"px":""),n.customEnableAnimations){var r=n.customDataAnimations;i.processAnimations(r)}return t.$el.defaultResponsive(n),i},changeContent:function(t){var i=e(t.currentTarget).html();this.model.set("textContent",i)},applySettingsChanged:function(t){var i=this,n=e(".awe-divider",i.el),o=e(".line-divider",n),a=e(".text-divider .content",n),s=(e(".divider-left",n),e(".divider-right",n)),l=i.model.toJSON(),r=i.$el.height();e.each(t.changed,function(e,r){switch(i.$el.changeResponsive(e,r),n.renderChangeSettingBoxModel(e,r,t),e){case"borderStyle":o.css("border-top-style",r);break;case"borderColor":o.css("border-top-color",r);break;case"borderWeight":"0"==r?o.css("border-top-width",""):o.css("border-top-width",r+"px");break;case"widthDivider":"0"==r?n.css("width",""):n.css("width",r+"px");break;case"with":"none"==r?(a.parent().hide(),s.hide()):(a.parent().show(),s.show());break;case"fontFamily":var d=i.model.previousAttributes().fontFamily.replace(/ /g,""),c=r.replace(/ /g,"");a.removeClass(d).addClass(c);break;case"fontStyle":var u=r?JSON.parse(r):{"font-weight":"","font-style":""};a.css(u);break;case"fontSize":-1==r?a.css("font-size",""):a.css("font-size",r+"px");break;case"lineHeight":-1==r?a.css("line-height",""):a.css("line-height",r+"px");break;case"letterSpacing":-1==r?a.css("letter-spacing",""):a.css("letter-spacing",r+"px");break;case"color":a.css("color",r);break;case"width":a.css({width:r+"px",left:0});break;case"customID":n.attr("id",r);break;case"customClass":var m=i.model.previousAttributes().customClass;n.removeClass(m).addClass(r);break;case"customEnableAttributes":n.renderChangeSettingsAttributes(e,r,l.customDataAttributes);break;case"customActionAttributes":n.renderChangeSettingsAttributes(e,r);break;case"customEnableAnimations":var h,v;r?(h=l.customDataAnimations,v=null,n.processAnimations(h)):(h=null,v=l.customDataAnimations,n.processAnimations(h,v));break;case"customDataAnimations":var h,v;h=l.customDataAnimations,v=i.model.previousAttributes().customDataAnimations,n.processAnimations(h,v)}}),setTimeout(function(){i.checkChangeHeight(r)},50)}}),AWEContent.Views.DividerItemController=AWEContent.Views.ItemController.extend({machineName:"divider",controllerHtml:function(){return'<div class="title-icon">Divider</div><i class="ic ac-icon-divider"></i>'},createItemModel:function(e){var t;return void 0!=e?(t=new AWEContent.Models.BoxModelSettings(e.margin),e.boxModelSettings=t,new AWEContent.Models.DividerItem(e)):new AWEContent.Models.DividerItem({margin:new AWEContent.Models.BoxModelSettings})}}),AWEContent.Views.DividerPanel=AWEContent.Views.ItemPanel.extend({tagName:"div",className:"awe-obj-panel panel-divider",panelName:"divider",initPanel:function(){AWEContent.Views.ItemPanel.prototype.initPanel.call(this);var t=this;e("#divider-style",this.el).change(function(e,i){t.editingModel.set("borderStyle",i.value)}),e("#divider-color",this.el).change(function(e,i){i=i?i.toRgbString():"",t.editingModel.set("borderColor",i)}),e("#divider-height",this.el).change(function(e,i){t.editingModel.set("borderWeight",i.value)}),e("#divider-width",t.el).change(function(e,i){t.editingModel.set("widthDivider",i.value)}),e("#divider-with",this.el).change(function(i,n){"none"==n.value?e("#divider-font, #divider-color-element",t.$el).hide():e("#divider-font, #divider-color-element",t.$el).show(),t.editingModel.set("with",n.value)}),e("#divider-font",this.$el).bind("fontFamilyChange",function(e,i){t.editingModel.set("fontFamily",i)}).bind("fontStyleChange",function(e,i){t.editingModel.set("fontStyle",i.value)}).bind("fontSizeChange",function(e,i){t.editingModel.set("fontSize",i.value)}).bind("letterSpacingChange",function(e,i){t.editingModel.set("letterSpacing",i.value)}).bind("lineHeightChange",function(e,i){t.editingModel.set("lineHeight",i.value)}),e("#divider-color-element",t.el).change(function(e,i){i=i?i.toRgbString():"",t.editingModel.set("color",i)}),e("#divider-column-box-model",t.el).initBoxModelPanel(t,"margin"),e("#text-divider-custom-id",t.el).change(function(){t.editingModel.set("customID",e(this).val())}),e("#text-divider-custom-class",t.el).change(function(){t.editingModel.set("customClass",e(this).val())}),e("#divider-custom-attributes",this.el).initAttributesPanel(t),e("#divider-animations input[name=enabled_custom_animation]",this.el).change(function(i,n){t.editingModel.set("customEnableAnimations",parseInt(e(this).val())),n&&t.editingModel.set("customDataAnimations",JSON.stringify(n.animations))})},setPanelElementsValue:function(){var t=this.editingModel.toJSON();e("#divider-style",this.$el).aweSelect("value",t.borderStyle),e("#divider-color",this.$el).aweColorPicker("value",t.borderColor),e("#divider-height",this.$el).aweSlider("value",t.borderWeight).trigger("change",{isPanel:!0}),e("#divider-width",this.$el).aweSlider("value",t.widthDivider),e("#divider-with",this.el).aweSelect("value",t["with"]),e("#divider-font",this.$el).aweFont("options",{fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontSize:t.fontSize,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing}),e("#divider-color-element",this.$el).aweColorPicker("value",t.color),e("#divider-column-box-model",this.$el).initBoxModel(t.margin),e("#text-divider-custom-id",this.el).val(t.customID),e("#text-divider-custom-class",this.el).val(t.customClass),e("#divider-custom-attributes",this.el).initAttributes(t.customEnableAttributes,t.customDataAttributes),e("#divider-animations input[name=enabled_custom_animation]",this.el).val(t.customEnableAnimations).trigger("change"),e("#divider-animations input[name=enabled_custom_animation]",this.el).attr("data-animations",t.customDataAnimations).data("view",this.editingModel.view)},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Divider</h2></div>'},custom_style:{type:"section",style:{type:"select",title:"Style",options:{solid:"Solid",dotted:"Dotter",dashed:"Dashed"},default_value:"solid"},color:{type:"colorpicker",title:"Color",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}},height:{type:"slider",title:"Height",min_value:0,max_value:100,default_value:12,allow_type:!0,unit:"px"},width:{type:"slider",title:"Width",min_value:0,max_value:1e3,default_value:12,allow_type:!0,unit:"px"}},custom_element:{type:"section","with":{type:"select",title:"With",options:{none:"None",text:"Text"},default_value:"text"},font:{type:"font",disabledElements:["textAlign"]},color_element:{type:"colorpicker",title:"Color",options:{preferredFormat:"rgb",AlphaVerticle:!0,showAlpha:!0,allowEmpty:!0,showInput:!0}}},custom_box_model:{type:"section",column_box_model:{type:"tabs",tabs:[{tab_title:"Margin",contents:{custom_margin:{type:"box_model",model_type:"margin",allow_type:!0,min_value:0,max_value:100,default_value:0}}}]}},custom_definitions:{type:"section",custom_id:{type:"text_field",title:"ID",attributes:{placeholder:"wrapper"},default_value:""},custom_class:{type:"text_field",title:"CSS class",attributes:{placeholder:"wrapper"},default_value:""},custom_attributes:{type:"custom_attributes"},animations:{type:"animations"}}}}}),e(document).ready(function(){AWEContent.Controllers.divider=new AWEContent.Views.DividerItemController,AWEContent.Panels.divider=new AWEContent.Views.DividerPanel})}(jQuery);